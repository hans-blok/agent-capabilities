c4-modelleur-agent:
  stage: agent
  image: python:3.11
  rules:
  - if: $CI_PIPELINE_SOURCE == "web"
  script:
  - pip install -r requirements.txt
  - python agent-componenten/runners/u.c4-modelleur.py --input ${{ inputs.source_docs
    }}
  artifacts:
    name: c4-model-diagrams
    paths:
    - output/c4-diagrams/
  after_script:
  - 'if [ $CI_JOB_STATUS == ''failed'' ]; then apk add --no-cache curl; curl -X POST
    -H ''Content-type: application/json'' --data ''{"text":"Agent u.c4-modelleur failed"}''
    $SLACK_WEBHOOK_URL; fi'
